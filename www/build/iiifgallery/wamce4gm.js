/*! Built with http://stenciljs.com */
const{h:e}=window.iiifgallery;class t{constructor(){this.items=null}manifestHandler(){this._reset()}ignoreHandler(){this._reset()}componentWillLoad(){this._reset()}_reset(){this.manifest?manifesto.loadManifest(this.manifest).then(e=>{const t=manifesto.create(e);if(t.isCollection())this.items=t.items;else{const e=t.getSequences();if(e.length){const t=e[0];this.items=t.getCanvases()}}if(this.ignore){const e=this.ignore.split(",").map(e=>e.trim());this.items=this.items.filter(t=>-1===e.indexOf(t.id))}}).catch(function(e){console.error(e),console.error("failed to load manifest")}):this.items=null}reset(){this._reset()}render(){return this.items?e("section",{class:"cf w-100 pa2"},this.items.map(t=>e("iiif-gallery-item",{item:t,selected:this._selectedItem===t}))):e("span",null)}itemSelected(e){const t=e.detail;this._selectedItem=t,t.isCollection()?this.onSelectCollection.emit(t):t.isManifest()?this.onSelectManifest.emit(t):this.onSelectCanvas.emit(t)}static get is(){return"iiif-gallery"}static get properties(){return{ignore:{type:String,attr:"ignore",watchCallbacks:["ignoreHandler"]},items:{state:!0},manifest:{type:String,attr:"manifest",watchCallbacks:["manifestHandler"]},reset:{method:!0}}}static get events(){return[{name:"onSelectManifest",method:"onSelectManifest",bubbles:!0,cancelable:!0,composed:!0},{name:"onSelectCollection",method:"onSelectCollection",bubbles:!0,cancelable:!0,composed:!0},{name:"onSelectCanvas",method:"onSelectCanvas",bubbles:!0,cancelable:!0,composed:!0}]}static get listeners(){return[{name:"onSelectItem",method:"itemSelected"}]}static get style(){return""}}var s,i=(function(e){!function(){var t={}.hasOwnProperty;function s(){for(var e=[],i=0;i<arguments.length;i++){var l=arguments[i];if(l){var n=typeof l;if("string"===n||"number"===n)e.push(l);else if(Array.isArray(l)&&l.length){var a=s.apply(null,l);a&&e.push(a)}else if("object"===n)for(var r in l)t.call(l,r)&&l[r]&&e.push(r)}}return e.join(" ")}e.exports?(s.default=s,e.exports=s):window.classNames=s}()}(s={exports:{}}),s.exports);class l{constructor(){this.selected=!1}renderLabel(){let t=this.item.getDefaultLabel();if(t)return e("div",{class:"ph2 ph0-ns pb3 link"},e("h3",{class:"f5 f4-ns mb0 black-90"},t))}render(){let t=this.item.getThumbnail();const s=i({collection:this.item.isCollection(),manifest:this.item.isManifest(),canvas:this.item.isCanvas(),selected:this.selected,"aspect-ratio":!0,"aspect-ratio--1x1":!0});return e("div",{onClick:()=>this._itemSelectedHandler(),class:"fl w-100 w-50-m  w-25-ns pa2"},e("div",{class:s},e("img",{src:t.id,class:"db bg-center cover aspect-ratio--object"})),this.renderLabel())}_itemSelectedHandler(){this.onSelectItem.emit(this.item)}static get is(){return"iiif-gallery-item"}static get properties(){return{item:{type:"Any",attr:"item"},selected:{type:Boolean,attr:"selected"}}}static get events(){return[{name:"onSelectItem",method:"onSelectItem",bubbles:!0,cancelable:!0,composed:!0}]}static get style(){return""}}export{t as IiifGallery,l as IiifGalleryItem};